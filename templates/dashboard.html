<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Dashboard - Cripto Invest App</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='style.css') }}"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
  </head>
  <body>
    <!-- Botão Hamburger para mobile -->
    <button
      class="hamburger"
      aria-label="Menu"
      aria-expanded="false"
      aria-controls="sidebar"
    >
      <i class="fas fa-bars"></i>
    </button>

    <!-- Sidebar -->
    <nav id="sidebar" class="sidebar" aria-label="Menu principal">
  <h2><i class="fas fa-coins"></i> Cripto Invest</h2>
  <ul>
    <li><a href="#cotacao"><i class="fas fa-coins"></i> Cotação Atual</a></li>
    <li><a href="#grafico"><i class="fas fa-chart-line"></i> Gráfico</a></li>
    <li><a href="#conversor"><i class="fas fa-exchange-alt"></i> Conversor</a></li>
    <li><a href="#historico"><i class="fas fa-history"></i> Histórico</a></li>
    <li><a href="/faq"><i class="fas fa-question-circle"></i> FAQ</a></li>  <!-- Aqui -->
    <li><a href="/logout"><i class="fas fa-sign-out-alt"></i> Sair</a></li>
  </ul>
</nav>

    <main class="main">
      <div class="card">
        <h2>
          <i class="fas fa-user-circle"></i> Bem-vindo, {{ nome_usuario or 'Usuário' }}
        </h2>
         <p>
          <i class="fas fa-calendar-day"></i> {{ data }} |
          <i class="fas fa-clock"></i> {{ hora }}
        </p>
      </div>

      <section id="cotacao" class="card">
        <h3><i class="fas fa-coins"></i> Cotação Atual</h3>
        <p>Moeda: {{ cripto or 'bitcoin' }}</p>
        <p>Preço atual: R$ {{ '%.2f'|format(preco or 0) }}</p>
      </section>

      <section id="grafico" class="card">
        <h3><i class="fas fa-chart-line"></i> Gráfico de Preço</h3>

        <!-- Formulário para seleção de criptomoeda -->
        <form method="post" style="margin-bottom: 1rem;">
          <input type="hidden" name="buscar" value="1" />
          <label for="cripto">Selecionar Criptomoeda:</label>
          <select name="cripto" id="cripto" onchange="this.form.submit()">
            <option value="bitcoin" {% if cripto == 'bitcoin' %}selected{% endif %}>Bitcoin</option>
            <option value="ethereum" {% if cripto == 'ethereum' %}selected{% endif %}>Ethereum</option>
            <option value="litecoin" {% if cripto == 'litecoin' %}selected{% endif %}>Litecoin</option>
            <option value="dogecoin" {% if cripto == 'dogecoin' %}selected{% endif %}>Dogecoin</option>
          </select>
        </form>

        <!-- Gráfico -->
        <canvas id="grafico-canvas"></canvas>
      </section>

      <section id="conversor" class="card">
        <h3><i class="fas fa-exchange-alt"></i> Conversor</h3>
        <form method="post">
          <label for="de">De:</label>
          <input type="text" name="de" id="de" required />
          <label for="para">Para:</label>
          <input type="text" name="para" id="para" required />
          <input type="submit" name="converter" value="Converter" />
        </form>
        {% if resultado %}
        <p>Resultado: {{ resultado }}</p>
        {% endif %}
      </section>

      <section id="historico" class="card">
        <h3><i class="fas fa-history"></i> Histórico de Investimentos</h3>
        {% if investimentos and investimentos|length > 0 %}
        <ul>
          {% for item in investimentos %}
          <li>
            {{ item.data or 'Data desconhecida' }} - {{ item.cripto }} - Valor:
            R$ {{ '%.2f'|format(item.valor or 0) }} - Preço Compra: R$ {{ '%.2f'|format(item.preco or 0) }}
          </li>
          {% endfor %}
        </ul>
        {% else %}
        <p>Você ainda não possui investimentos registrados.</p>
        {% endif %}
      </section>
    </main>

    <!-- Script Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
document.addEventListener("DOMContentLoaded", () => {
  // Seu código para hamburger e sidebar responsiva
  const hamburger = document.querySelector('.hamburger');
  const sidebar = document.getElementById('sidebar');

  hamburger.addEventListener('click', () => {
    const expanded = hamburger.getAttribute('aria-expanded') === 'true' || false;
    hamburger.setAttribute('aria-expanded', !expanded);
    sidebar.classList.toggle('active');
  });

  // Fechar sidebar ao clicar em link (mobile)
  sidebar.querySelectorAll('a').forEach(link => {
    link.addEventListener('click', () => {
      if (window.innerWidth <= 700) {
        sidebar.classList.remove('active');
        hamburger.setAttribute('aria-expanded', false);
      }
    });
  });

  // Seu código para gráfico pode ficar aqui também, ou fora
});
</script>

  </body>
</html>
